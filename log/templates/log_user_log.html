{% extends "base.html" %}
{% block content %}
<div class="col-12 col-sm-12 col-md-8 col-lg-9 col-xl-12">
    <div class="react-reveal container" style="animation-fill-mode: both;
        animation-duration: 1000ms; animation-delay: 0ms;
        animation-iteration-count: 1; opacity: 1; animation-name:
        react-reveal-962533893451499-1;">
        <div class="row my-2">
            <div class="col-12 col-sm-3 col-md-6 col-lg-4 col-xl-4 fw-bold">
                User Edit Log
            </div>
            <div class="col-4 col-sm-3 col-md-1 col-lg-5 col-xl-5 text-center"></div>
            <div class="col-4 col-sm-3 col-md-1 col-lg-3 col-xl-3 text-center
                my-1">
                <div class="input-group shadow-sm">
                    <span class="input-group-text focus-none bg-transparent
                        border-right-none" id="basic-addon1">
                        <svg aria-hidden="true" class="svg-inline--fa
                            fa-magnifying-glass hover-search" color="#fab417"
                            data-icon="magnifying-glass" data-prefix="fas"
                            focusable="false" role="img" viewbox="0 0 512 512"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M500.3 443.7l-119.7-119.7c27.22-40.41
                                40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32
                                235.2 1.723C99.01-15.51-15.51 99.01 1.724
                                235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8
                                7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62
                                15.62 40.95 15.62 56.57 0C515.9 484.7 515.9
                                459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128
                                128-128s128 57.42 128 128c0 70.58-57.42 128-128
                                128S79.1 278.6 79.1 208z" fill="currentColor">
                            </path>
                        </svg>
                    </span>
                    <input aria-describedby="basic-addon1" aria-label="Username"
                        class="form-control focus-none border-left-none"
                        placeholder="Search..." type="text" />
                </div>
            </div>
        </div>
    </div>
    <div class="react-reveal container my-2 " style="animation-fill-mode: both;
        animation-duration: 1000ms; animation-delay: 0ms;
        animation-iteration-count: 1; opacity: 1; animation-name:
        react-reveal-962533893451499-1;">
        <div class="row">
            <div class="col-12 col-sm-6 col-md-6 col-lg-2 col-xl-2">
                <input id="fromDate" name="fromDate" class="bg-orange date-input color-white w-100
                    height-button border-none px-3 fs-6 cursor" type="date" />
            </div>
            <div class="col-12 col-sm-6 col-md-6 col-lg-2 col-xl-2">
                <input id="toDate" name="toDate" class="bg-orange date-input color-white w-100
                    height-button border-none px-3 fs-6 cursor" type="date" />
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-1 col-xl-1 text-center">
                <button onclick="process()" class="btn btn-primary
                    focus-none float-start height-button" type="button">
                    Process
                </button>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-2 col-xl-2 text-center">
                <button class="text-light btn btn-info
                    focus-none float-start height-button" type="button">
                    clear
                </button>
            </div>
        </div>
    </div>
    <div class="react-reveal container" style="animation-fill-mode: both;
        animation-duration: 1000ms; animation-delay: 0ms;
        animation-iteration-count: 1; opacity: 1; animation-name:
        react-reveal-962533893451499-1;">
        <div class="row">
            <div class="col-0 col-sm-0 col-md-4 col-lg-6 col-xl-6">
            </div>
        </div>
    </div>
    <div class="react-reveal" style="animation-fill-mode: both;
        animation-duration: 1000ms; animation-delay: 0ms;
        animation-iteration-count: 1; opacity: 1; animation-name:
        react-reveal-962533893451499-1;">
        <div class="">
            <table style="height: 21px !important; width: 50vw; text-align: center;margin-left: 25vw; margin-right: 25vw;">
                <thead>
                    <tr class="table-border-none">
                        <th class="bg-dark text-white" scope="col">
                            User Code
                        </th>
                        <th class="bg-dark text-white" scope="col">
                            Action
                        </th>
                        <th class="bg-dark text-white" scope="col">
                            User Ip
                        </th>
                        <th class="bg-dark text-white" scope="col">
                            D. Time
                        </th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>
    <div style="transform: translateY(10px)" class="ms-3">
        SHOW
        <span>
            <select class="form-select bg-orange color-white focus-none
                width-entry d-inline mx-2" aria-label="Default select example">
                <option class="bg-light text-dark ps-3" value="10">10</option>
                <option class="bg-light text-dark ps-3" value="20">20</option>
                <option class="bg-light text-dark ps-3" value="30">30</option>
                <option class="bg-light text-dark ps-3" value="40">40</option>
            </select>
        </span>
        ENTRIES
    </div>
    <div style="transform: translateY(-30px)" class="d-flex flex-row-reverse
        bd-highlight">
        <div class="p-2 bd-highlight">
            <div class="container float-end w-100">
                <nav aria-label="Page navigation example float-end">
                    <ul class="pagination">
                        <li class="page-item"><a class="page-link text-dark
                                border-none mx-1" href="/">Previous</a></li>
                        <li class="page-item"><a class="page-link text-dark
                                border rounded border-dark" href="/">1</a></li>
                        <li class="page-item"><a class="page-link text-dark
                                border-none mx-1" href="/">Next</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
    <script>
        function process() {
            var fromDate = document.getElementById("fromDate").value;
            var toDate = document.getElementById("toDate").value;
            console.log(fromDate, toDate);
            fetch('/log/user_log/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    fromDate: fromDate,
                    toDate: toDate
                })
            }).then(res => res.json()).then(d => {
                var table = document.getElementById("tableBody");
                html = "";
                for(var i = 0; i < d["data"].length; i++) {
                    html += "<tr class='table-border-none'>";
                        html += "<td class='bg-white text-black'>" + d["data"][i]["userCode"] + "</td>";
                    html += "<td class='bg-white text-black'>" + d["data"][i]["Action"] + "</td>";
                    html += "<td class='bg-white text-black'>" + d["data"][i]["userIp"] + "</td>";
                    html += "<td class='bg-white text-black'>" + d["data"][i]["d_time"] + "</td>";
                    html += "</tr>";
                }
                document.getElementById("tableBody").innerHTML = html;
            });
        }
    </script>
</div>
{% endblock %}