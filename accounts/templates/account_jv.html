{% extends "base.html" %}
{% block title %}JV{% endblock %}
{% block content %}
<div class="col-12 col-sm-12 col-md-8 col-lg-9 col-xl-12">
   <div class="react-reveal container" style="animation-fill-mode: both;
      animation-duration: 1000ms; animation-delay: 0ms;
      animation-iteration-count: 1; opacity: 1; animation-name:
      react-reveal-912928347366779-1;">
      <div class="row my-2">
         <div class="col-3 col-sm-3 col-md-6 col-lg-4 col-xl-4 fw-bold">
            ACCOUNT / JV
         </div>
         <div class="col-4 col-sm-3 col-md-1 col-lg-5 col-xl-5 text-end my-1"></div>
         <div class="col-4 col-sm-3 col-md-1 col-lg-3 col-xl-3 text-end my-1"
            style="z-index: 1;">
            <div class="input-group shadow-sm">
               <span class="input-group-text focus-none bg-transparent
                  border-right-none" id="basic-addon1">
                  <svg aria-hidden="true" class="svg-inline--fa
                     fa-magnifying-glass hover-search" color="#fab417"
                     data-icon="magnifying-glass" data-prefix="fas"
                     focusable="false" role="img" viewbox="0 0 512 512"
                     xmlns="http://www.w3.org/2000/svg">
                     <path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9
                        33.46-144.7C401.8 87.79 326.8 13.32 235.2
                        1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64
                        86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236
                        144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57
                        0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58
                        57.42-128 128-128s128 57.42 128 128c0 70.58-57.42
                        128-128 128S79.1 278.6 79.1 208z" fill="currentColor">
                     </path>
                  </svg>
               </span>
               <input aria-describedby="basic-addon1" aria-label="Username"
                  class="form-control focus-none border-left-none"
                  placeholder="Search..." type="text" />
            </div>
         </div>
      </div>
   </div>
   <form action="" method="POST">
      {% csrf_token %}
      <input type="hidden" name="Vid" id="Vid">
      <div class="react-reveal container" style="animation-fill-mode: both;
         animation-duration: 1000ms; animation-delay: 0ms;
         animation-iteration-count: 1; opacity: 1; animation-name:
         react-reveal-912928347366779-1; transform: translateY(-50px);">
         <div class="row">
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 my-3">
               <div class="container-fluid ps-0">
                  <div class="row">
                     <div class="col-12 col-sm-12 col-md-4 col-lg-3 col-xl-3">
                        <div class="input-group">
                           <label class="input-group-text bg-transparent
                              border-none" for="inputGroupSelect01">
                              Transaction Type
                           </label>
                        </div>
                     </div>
                     <div class="col-12 col-sm-12 col-md-12 col-lg-9 col-xl-9">
                        <div class="container-fluid">
                           <div class="row">
                              <div class="col-12 col-sm-12 col-md-12 col-lg-4
                                 col-xl-4">
                                 <div class="form-check my-1">
                                    <input class="form-check-input focus-none"
                                       id="flexRadioDefault1"
                                       name="type" type="radio" value="Recipt"/>
                                    <label class="form-check-label"
                                       for="flexRadioDefault1">
                                       Recipt
                                    </label>
                                 </div>
                              </div>
                              <div class="col-12 col-sm-12 col-md-12 col-lg-7
                                 col-xl-7">
                                 <div class="form-check my-1">
                                    <input class="form-check-input focus-none"
                                       id="flexRadioDefault2"
                                       name="type" type="radio" value="Payment"/>
                                    <label class="form-check-label"
                                       for="flexRadioDefault1">
                                       Payment
                                    </label>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4">
               <div class="input-group">
                  <label class="input-group-text bg-transparent border-none col-4"
                     for="accountCode">
                     Account Code
                  </label>
                  <select style="height: 25px;padding-top: 0
                     !important;padding-bottom: 0 !important;" class="form-select
                     input-border focus-none" id="accountCode" name="accountCode">
                     <option class="">
                        Select From Account
                     </option>
                     {% for user in users %}
                     <option value="{{user.username}}">
                        {{user.username}}
                     </option>
                     {% endfor %}
                  </select>
               </div>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 my-1">
               <div class="input-group">
                  <label class="input-group-text bg-transparent border-none col-4"
                     for="accountName">
                     Account Name
                  </label>
                  <select style="height: 25px;padding-top: 0
                     !important;padding-bottom: 0 !important;" class="form-select
                     input-border focus-none" id="accountName" name="accountName">
                     <option class="">
                        Select Customer
                     </option>
                     {% for user in users %}
                     <option value="{{user.username}}">
                        {{user.username}}
                     </option>
                     {% endfor %}
                  </select>
               </div>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-3 col-xl-3 text-start
               text-sm-start text-md-start my-1">
               <span class="color-brown fw-bold">
                  Balance:
               </span>
               <span class="color-blue fw-bold">
                  {{balance}}(Cr)
               </span>
            </div>
            <div class="col-2 col-sm-2 col-md-2 col-lg-12 col-xl-12">
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4">
               <div class="input-group">
                  <label class="input-group-text bg-transparent border-none col-4"
                     for="tDate">
                     Date
                  </label>
                  <input style="height: 25px;padding-top: 0 ;" type="date"
                     class="input-border px-3 py-1 border rounded text-muted
                     focus-none col-8" id="tDate" name="tDate" />
               </div>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2 text-start
               text-sm-start text-md-start">
               <span class="color-blue fw-bold">
                  Show entries
               </span>
            </div>
            <div class="col-2 col-sm-2 col-md-2 col-lg-12 col-xl-12">
            </div>
            <div class="col-4 mt-1">
               <div class="input-group">
                  <span class="input-group-text bg-transparent border-none col-4"
                     id="basic-addon1">
                     Amount
                  </span>
                  <input style="height: 25px;padding-top: 0 ;"
                     aria-describedby="basic-addon1" aria-label="Username"
                     class="form-control input-border focus-none" placeholder=""
                     type="text" name="amount" id="amount"/>
               </div>
            </div>
            <div class="col-5"></div>
            <div class="col-3"></div>
            <div class="col-4 mt-1">
               <div class="input-group">
                  <span class="input-group-text bg-transparent border-none col-4"
                     id="basic-addon1">
                     Remarks
                  </span>
                  <input style="height: 25px;padding-top: 0 ;"
                     aria-describedby="basic-addon1" aria-label="Username"
                     class="form-control input-border focus-none" placeholder=""
                     type="text" name="remarks" id="remarks"/>
               </div>
            </div>
            <div class="col-12 my-2">
               <button style="width: 75px;margin-right:30px;margin-left: 10px;"
                  class="btn bg-orange color-white btn-sm focus-none custom-btn
                  my-0" type="submit" id="Save" name="submit" value="Save">
                  Save
               </button>
               <button style="width: 75px;margin-right:30px" class="btn bg-brown
                  color-white btn-sm focus-none custom-btn button-effect my-0"
                  type="submit" id="Delete" name="submit" value="Delete">
                  Delete
               </button>
               <button onclick="clearBtn()" style="width: 75px;margin-right:30px" class="btn bg-primary
                  color-white btn-sm focus-none custom-btn my-0" type="button">
                  Clear
               </button>
            </div>
         </div>
      </div>
   </form>
   <div class="react-reveal" style="animation-fill-mode: both;
      animation-duration: 1000ms; animation-delay: 0ms;
      animation-iteration-count: 1; opacity: 1; animation-name:
      react-reveal-962533893451499-1; transform: translateY(-50px);">
      <div class="">
         <table style="height: 21px !important; background-color: #686868
            !important;width: 98vw;">
            <thead>
               <tr class="table-border-none">
                  <th class="bg-dark text-white" scope="col">
                     Voucher No
                  </th>
                  <th class="bg-dark text-white" scope="col">
                     Account Code
                  </th>
                  <th class="bg-dark text-white" scope="col">
                     Account Name
                  </th>
                  <th class="bg-dark text-white" scope="col">
                     Type
                  </th>
                  <th class="bg-dark text-white" scope="col">
                     TrDt
                  </th>
                  <th class="bg-dark text-white" scope="col">
                     Amount
                  </th>
                  <th class="bg-dark text-white" scope="col">
                     Remarks
                  </th>
                  <th class="bg-dark text-white" scope="col">
                     Added By
                  </th>
                  <th class="bg-dark text-white" scope="col">
                  </th>
               </tr>
            </thead>
            <tbody>
               {% for entry in entries %}
               <tr class="table-border-none">
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.id}}</th>
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.accountCode}}</th>
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.accountName}}</th>
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.tType}}</th>
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.date}}</th>
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.amount}}</th>
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.remark}}</th>
                  <th class="td-border bg-secondary text-white" scope="col">{{entry.username}}</th>
                  <th onclick="dataImporter(this)" class="text-danger td-border bg-secondary" scope="col">Edit </th>
               </tr>
               {%endfor%}
            </tbody>
         </table>
         <script>
                  function dataImporter(element)
                  {
                     let row = element.parentElement;
                     if(row.children[3].innerHTML == "Recipt")
                     {
                           document.getElementById("flexRadioDefault1").checked = true;
                     }
                     else
                     {
                           document.getElementById("flexRadioDefault2").checked = true;
                     }
                     document.getElementById("Vid").value = row.children[0].innerHTML;
                     document.getElementById("accountCode").value = row.children[1].innerHTML;
                     document.getElementById("accountName").value = row.children[2].innerHTML;
                     var now = new Date();
                     var day = ("0" + now.getDate()).slice(-2);
                     var month = ("0" + (now.getMonth() + 1)).slice(-2);
                     var today = now.getFullYear()+"-"+(month)+"-"+(day) ;
                     document.getElementById("tDate").value = today;
                     document.getElementById("amount").value = row.children[5].innerHTML;
                     document.getElementById("remarks").value = row.children[6].innerHTML;
                  }
                  function clearBtn()
                  {
                     document.getElementById("flexRadioDefault1").checked = false;
                     document.getElementById("flexRadioDefault2").checked = false;
                     document.getElementById("Vid").value = "";
                     document.getElementById("accountCode").value = "";
                     document.getElementById("accountName").value = "";
                     document.getElementById("tDate").value = "";
                     document.getElementById("amount").value = "";
                     document.getElementById("remarks").value = "";
                  }
            </script>
      </div>
   </div>
</div>
{% endblock %}